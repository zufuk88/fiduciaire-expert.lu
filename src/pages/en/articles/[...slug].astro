---
// src/pages/articles/[...slug].astro
import { getCollection, getEntryBySlug } from 'astro:content';
import ArticleLayoutEn from '../../../layouts/ArticleLayoutEn.astro'; // Use English article layout
// 1. Generate a page for each article from the 'blog' collection
export async function getStaticPaths() {
  const allPosts = await getCollection('blog');
  const englishCategories = ['Tax', 'Payroll', 'Accounting', 'Corporate Law'];
  const englishPosts = allPosts.filter(post => englishCategories.includes(post.data.category) && post.data.draft !== true);
  return englishPosts.map(entry => ({
    params: { slug: entry.slug.replace('en/', '') },
    props: { entry },
  }));
}
const { entry } = Astro.props;
const { Content, headings } = await entry.render();
// Passer le slug pour permettre la gestion des traductions
const articleData = {
  ...entry.data,
  slug: entry.slug.replace('en/', ''),
  rawContent: entry.body, // Ajouter le contenu brut pour le temps de lecture
  headings: headings // Passer les headings pour la table des mati√®res
};
---
<ArticleLayoutEn frontmatter={articleData}>
  <Content />
</ArticleLayoutEn>