/* ===== OPTIMISATIONS SPÉCIFIQUES CHROME ===== */
/* Fichier dédié pour résoudre les problèmes de performance sur Chrome */

/* Détection de Chrome */
@supports (-webkit-appearance:none) and (not (stroke-color:transparent)) {
  
  /* 1. Désactiver les animations complexes sur Chrome */
  * {
    /* Réduire la durée des transitions pour plus de fluidité */
    transition-duration: 0.15s !important;
  }
  
  /* 2. Forcer l'accélération GPU sur les éléments critiques */
  .site-header,
  .breadcrumbs,
  .article-sidebar,
  .sidebar-column {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  /* IMPORTANT: Préserver le sticky pour breadcrumbs et header */
  .breadcrumbs {
    position: sticky !important;
    top: 72px !important;
    z-index: 999 !important;
  }
  
  .site-header {
    position: sticky !important;
    top: 0 !important;
    z-index: 1000 !important;
  }
  
  /* 3. Optimiser les box-shadows (très coûteuses sur Chrome) */
  *:hover {
    box-shadow: none !important;
  }
  
  /* Remplacer les box-shadows par des bordures sur hover */
  .post-card:hover,
  .featured-article:hover,
  .related-card:hover,
  button:hover,
  .btn:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06) !important;
    border-color: #cbd5e1 !important;
  }
  
  /* 4. Désactiver les transforms sur hover (sauf essentiels) */
  .post-card:hover,
  .featured-article:hover,
  .related-card:hover {
    transform: translateY(-1px) translateZ(0) !important;
  }
  
  /* 5. Optimiser les images */
  img {
    will-change: auto !important;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  /* Désactiver les animations d'images sur hover */
  .post-image-wrapper img:hover,
  .featured-image-wrapper img:hover,
  .related-image-wrapper img:hover {
    transform: none !important;
  }
  
  /* 6. Optimiser le scroll */
  html {
    scroll-behavior: auto !important; /* Désactiver smooth scroll sur Chrome */
  }
  
  /* 7. Réduire les effets de blur */
  .site-header,
  .breadcrumbs {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  
  /* 8. Optimiser les animations existantes */
  @keyframes fadeIn {
    from { opacity: 0.8; }
    to { opacity: 1; }
  }
  
  @keyframes slideUp {
    from { transform: translateY(10px); }
    to { transform: translateY(0); }
  }
  
  /* 9. Contain pour limiter les recalculs */
  .container,
  .article-content,
  .blog-layout,
  main {
    contain: layout style;
  }
  
  /* 10. Optimisation des polices */
  body {
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: subpixel-antialiased;
  }
}

/* Optimisations spécifiques pour Chrome sur mobile */
@media screen and (-webkit-min-device-pixel-ratio:0) and (max-width: 768px) {
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Désactiver toutes les transitions sur mobile Chrome */
  *,
  *::before,
  *::after {
    transition: none !important;
    animation: none !important;
  }
}

/* Mode performance pour Chrome (activé par défaut) */
@media (prefers-reduced-motion: no-preference) {
  @supports (-webkit-appearance:none) and (not (stroke-color:transparent)) {
    :root {
      --transition-speed: 0.1s;
    }
    
    * {
      transition-duration: var(--transition-speed) !important;
    }
  }
}