---
export interface Props {
  currentPage: string;
  category?: string;
}

const { currentPage, category } = Astro.props;

// Définir les liens contextuels par page
const relatedLinks = {
  'creation-societe': [
    { title: 'La SARL-S au Luxembourg : Guide complet', url: '/fr/articles/sarl-s', description: 'Découvrez si la SARL-S est adaptée à votre projet' },
    { title: 'SARL au Luxembourg : Le guide définitif', url: '/fr/articles/sarl-luxembourg', description: 'Tout savoir sur la création d\'une SARL classique' },
    { title: 'Société Anonyme (SA) au Luxembourg', url: '/fr/articles/societe-anonyme-sa', description: 'Pour les projets d\'envergure' },
    { title: 'Service de domiciliation', url: '/fr/domiciliation', description: 'Obtenez une adresse prestigieuse' }
  ],
  'comptabilite': [
    { title: 'Intégration fiscale au Luxembourg', url: '/fr/articles/integration-fiscale', description: 'Optimisez votre structure de groupe' },
    { title: 'Gestion de la paie', url: '/fr/paie', description: 'Externalisez vos obligations sociales' },
    { title: 'Nos services comptables', url: '/fr/services', description: 'Vue d\'ensemble de notre expertise' }
  ],
  'fiscalite': [
    { title: 'Intégration fiscale : Guide pratique', url: '/fr/articles/integration-fiscale', description: 'Économies d\'impôts pour les groupes' },
    { title: 'Avantages en nature au Luxembourg', url: '/fr/articles/avantage-en-nature', description: 'Optimisation de la rémunération' },
    { title: 'Leasing d\'œuvres d\'art', url: '/fr/articles/leasing-oeuvre-art', description: 'Avantages fiscaux culturels' }
  ],
  'articles': {
    'creation-entreprise': [
      { title: 'Créer votre société', url: '/fr/creation-societe-luxembourg', description: 'Service complet de création' },
      { title: 'SAS au Luxembourg', url: '/fr/articles/sas-luxembourg', description: 'Une alternative moderne' },
      { title: 'SCI au Luxembourg', url: '/fr/articles/sci-luxembourg', description: 'Pour l\'immobilier' }
    ],
    'fiscalite': [
      { title: 'Services fiscaux', url: '/fr/services', description: 'Optimisation et conformité' },
      { title: 'Comptabilité PME', url: '/fr/comptabilite', description: 'Gestion comptable complète' }
    ]
  }
};

// Obtenir les liens pertinents
const getRelatedLinks = () => {
  if (category && relatedLinks.articles?.[category]) {
    return relatedLinks.articles[category];
  }
  
  if (currentPage) {
    const pageKey = currentPage.replace('/fr/', '').replace('.astro', '');
    return relatedLinks[pageKey] || [];
  }
  
  return [];
};

const links = getRelatedLinks();
---

{links.length > 0 && (
  <section class="related-content">
    <div class="container">
      <h3>Pour aller plus loin</h3>
      <div class="related-grid">
        {links.map(link => (
          <a href={link.url} class="related-card">
            <h4>{link.title}</h4>
            <p>{link.description}</p>
            <span class="read-more">Lire la suite →</span>
          </a>
        ))}
      </div>
    </div>
  </section>
)}

<style>
  .related-content {
    margin-top: 4rem;
    padding: 3rem 0;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
  }

  .related-content h3 {
    font-size: 1.75rem;
    margin-bottom: 2rem;
    color: #1a1a1a;
    text-align: center;
  }

  .related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .related-card {
    background: white;
    padding: 1.5rem;
    border-radius: 4px;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
    border: 1px solid #e9ecef;
    display: flex;
    flex-direction: column;
  }

  .related-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    border-color: #4B6BFB;
  }

  .related-card h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: #1a1a1a;
    line-height: 1.3;
  }

  .related-card p {
    font-size: 0.9375rem;
    color: #666;
    line-height: 1.5;
    flex: 1;
    margin-bottom: 1rem;
  }

  .read-more {
    color: #4B6BFB;
    font-weight: 600;
    font-size: 0.9375rem;
    display: inline-flex;
    align-items: center;
    transition: transform 0.2s ease;
  }

  .related-card:hover .read-more {
    transform: translateX(4px);
  }

  @media (max-width: 768px) {
    .related-grid {
      grid-template-columns: 1fr;
    }
  }
</style>c